(()=>{var a={};a.id=435,a.ids=[435],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5745:(a,b,c)=>{"use strict";var d,e=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,i={};((a,b)=>{for(var c in b)e(a,c,{get:b[c],enumerable:!0})})(i,{createBrowserSupabaseClient:()=>B,createClientComponentClient:()=>k,createMiddlewareClient:()=>t,createMiddlewareSupabaseClient:()=>D,createPagesBrowserClient:()=>l,createPagesServerClient:()=>p,createRouteHandlerClient:()=>z,createServerActionClient:()=>A,createServerComponentClient:()=>w,createServerSupabaseClient:()=>C}),a.exports=((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of g(b))h.call(a,c)||void 0===c||e(a,c,{get:()=>b[c],enumerable:!(d=f(b,c))||d.enumerable});return a})(e({},"__esModule",{value:!0}),i);var j=c(32353);function k({supabaseUrl:a="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:c,cookieOptions:e,isSingleton:f=!0}={}){if(!a||!b)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");let g=()=>{var d;return(0,j.createSupabaseClient)(a,b,{...c,global:{...null==c?void 0:c.global,headers:{...null==(d=null==c?void 0:c.global)?void 0:d.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"}},auth:{storage:new j.BrowserCookieAuthStorageAdapter(e)}})};if(f){let a=d??g();return"undefined"==typeof window?a:(d||(d=a),d)}return g()}var l=k,m=c(32353),n=c(28356),o=class extends m.CookieAuthStorageAdapter{constructor(a,b){super(b),this.context=a}getCookie(a){var b,c,d;return(0,n.splitCookiesString)((null==(c=null==(b=this.context.res)?void 0:b.getHeader("set-cookie"))?void 0:c.toString())??"").map(b=>(0,m.parseCookies)(b)[a]).find(a=>!!a)??(null==(d=this.context.req)?void 0:d.cookies[a])}setCookie(a,b){this._setCookie(a,b)}deleteCookie(a){this._setCookie(a,"",{maxAge:0})}_setCookie(a,b,c){var d;let e=(0,n.splitCookiesString)((null==(d=this.context.res.getHeader("set-cookie"))?void 0:d.toString())??"").filter(b=>!(a in(0,m.parseCookies)(b))),f=(0,m.serializeCookie)(a,b,{...this.cookieOptions,...c,httpOnly:!1});this.context.res.setHeader("set-cookie",[...e,f])}};function p(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){var f;if(!b||!c)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,m.createSupabaseClient)(b,c,{...d,global:{...null==d?void 0:d.global,headers:{...null==(f=null==d?void 0:d.global)?void 0:f.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"}},auth:{storage:new o(a,e)}})}var q=c(32353),r=c(28356),s=class extends q.CookieAuthStorageAdapter{constructor(a,b){super(b),this.context=a}getCookie(a){var b;let c=(0,r.splitCookiesString)((null==(b=this.context.res.headers.get("set-cookie"))?void 0:b.toString())??"").map(b=>(0,q.parseCookies)(b)[a]).find(a=>!!a);return c||(0,q.parseCookies)(this.context.req.headers.get("cookie")??"")[a]}setCookie(a,b){this._setCookie(a,b)}deleteCookie(a){this._setCookie(a,"",{maxAge:0})}_setCookie(a,b,c){let d=(0,q.serializeCookie)(a,b,{...this.cookieOptions,...c,httpOnly:!1});this.context.res.headers&&this.context.res.headers.append("set-cookie",d)}};function t(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){var f;if(!b||!c)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,q.createSupabaseClient)(b,c,{...d,global:{...null==d?void 0:d.global,headers:{...null==(f=null==d?void 0:d.global)?void 0:f.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"}},auth:{storage:new s(a,e)}})}var u=c(32353),v=class extends u.CookieAuthStorageAdapter{constructor(a,b){super(b),this.context=a,this.isServer=!0}getCookie(a){var b;return null==(b=this.context.cookies().get(a))?void 0:b.value}setCookie(a,b){}deleteCookie(a){}};function w(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){var f;if(!b||!c)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,u.createSupabaseClient)(b,c,{...d,global:{...null==d?void 0:d.global,headers:{...null==(f=null==d?void 0:d.global)?void 0:f.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"}},auth:{storage:new v(a,e)}})}var x=c(32353),y=class extends x.CookieAuthStorageAdapter{constructor(a,b){super(b),this.context=a}getCookie(a){var b;return null==(b=this.context.cookies().get(a))?void 0:b.value}setCookie(a,b){this.context.cookies().set(a,b,this.cookieOptions)}deleteCookie(a){this.context.cookies().set(a,"",{...this.cookieOptions,maxAge:0})}};function z(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){var f;if(!b||!c)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,x.createSupabaseClient)(b,c,{...d,global:{...null==d?void 0:d.global,headers:{...null==(f=null==d?void 0:d.global)?void 0:f.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"}},auth:{storage:new y(a,e)}})}var A=z;function B({supabaseUrl:a="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:c,cookieOptions:d}={}){return console.warn("Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),l({supabaseUrl:a,supabaseKey:b,options:c,cookieOptions:d})}function C(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){return console.warn("Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),p(a,{supabaseUrl:b,supabaseKey:c,options:d,cookieOptions:e})}function D(a,{supabaseUrl:b="https://cxzllzyxwpyptfretryc.supabase.co",supabaseKey:c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4emxsenl4d3B5cHRmcmV0cnljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYxODAsImV4cCI6MjA2Nzk1MjE4MH0.b794GEIWE4ZdMAm9xQYAJ0Gx-XEn1fhJBTIIeTro_1g",options:d,cookieOptions:e}={}){return console.warn("Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware"),t(a,{supabaseUrl:b,supabaseKey:c,options:d,cookieOptions:e})}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:a=>{"use strict";a.exports=require("punycode")},12604:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tbwa/tbwa-agency-databank/platforms/scout-dash/app/dashboard/optimized/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tbwa/tbwa-agency-databank/platforms/scout-dash/app/dashboard/optimized/page.tsx","default")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},28356:a=>{"use strict";var b={decodeValues:!0,map:!1,silent:!1};function c(a){return"string"==typeof a&&!!a.trim()}function d(a,d){var e,f,g,h,i=a.split(";").filter(c),j=(e=i.shift(),f="",g="",(h=e.split("=")).length>1?(f=h.shift(),g=h.join("=")):g=e,{name:f,value:g}),k=j.name,l=j.value;d=d?Object.assign({},b,d):b;try{l=d.decodeValues?decodeURIComponent(l):l}catch(a){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+l+"'. Set options.decodeValues to false to disable this feature.",a)}var m={name:k,value:l};return i.forEach(function(a){var b=a.split("="),c=b.shift().trimLeft().toLowerCase(),d=b.join("=");"expires"===c?m.expires=new Date(d):"max-age"===c?m.maxAge=parseInt(d,10):"secure"===c?m.secure=!0:"httponly"===c?m.httpOnly=!0:"samesite"===c?m.sameSite=d:"partitioned"===c?m.partitioned=!0:m[c]=d}),m}function e(a,e){if(e=e?Object.assign({},b,e):b,!a)if(!e.map)return[];else return{};if(a.headers)if("function"==typeof a.headers.getSetCookie)a=a.headers.getSetCookie();else if(a.headers["set-cookie"])a=a.headers["set-cookie"];else{var f=a.headers[Object.keys(a.headers).find(function(a){return"set-cookie"===a.toLowerCase()})];f||!a.headers.cookie||e.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),a=f}return(Array.isArray(a)||(a=[a]),e.map)?a.filter(c).reduce(function(a,b){var c=d(b,e);return a[c.name]=c,a},{}):a.filter(c).map(function(a){return d(a,e)})}a.exports=e,a.exports.parse=e,a.exports.parseString=d,a.exports.splitCookiesString=function(a){if(Array.isArray(a))return a;if("string"!=typeof a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32163:()=>{},32353:(a,b,c)=>{"use strict";c.r(b),c.d(b,{BrowserCookieAuthStorageAdapter:()=>w,CookieAuthStorageAdapter:()=>v,DEFAULT_COOKIE_OPTIONS:()=>t,createSupabaseClient:()=>x,isBrowser:()=>s,parseCookies:()=>y,parseSupabaseCookie:()=>q,serializeCookie:()=>z,stringifySupabaseSession:()=>r});var d=c(79428);new TextEncoder;let e=new TextDecoder;d.Buffer.isEncoding("base64url");var f=c(60463),g=Object.create,h=Object.defineProperty,i=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,k=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,m=(a,b,c)=>(c=null!=a?g(k(a)):{},((a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let c of j(b))l.call(a,c)||void 0===c||h(a,c,{get:()=>b[c],enumerable:!(d=i(b,c))||d.enumerable});return a})(!b&&a&&a.__esModule?c:h(c,"default",{value:a,enumerable:!0}),a)),n=((a,b)=>function(){return b||(0,a[j(a)[0]])((b={exports:{}}).exports,b),b.exports})({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(a){a.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");for(var c={},e=(b||{}).decode||d,f=0;f<a.length;){var g=a.indexOf("=",f);if(-1===g)break;var h=a.indexOf(";",f);if(-1===h)h=a.length;else if(h<g){f=a.lastIndexOf(";",g-1)+1;continue}var i=a.slice(f,g).trim();if(void 0===c[i]){var j=a.slice(g+1,h).trim();34===j.charCodeAt(0)&&(j=j.slice(1,-1)),c[i]=function(a,b){try{return b(a)}catch(b){return a}}(j,e)}f=h+1}return c},a.serialize=function(a,d,f){var g=f||{},h=g.encode||e;if("function"!=typeof h)throw TypeError("option encode is invalid");if(!c.test(a))throw TypeError("argument name is invalid");var i=h(d);if(i&&!c.test(i))throw TypeError("argument val is invalid");var j=a+"="+i;if(null!=g.maxAge){var k=g.maxAge-0;if(isNaN(k)||!isFinite(k))throw TypeError("option maxAge is invalid");j+="; Max-Age="+Math.floor(k)}if(g.domain){if(!c.test(g.domain))throw TypeError("option domain is invalid");j+="; Domain="+g.domain}if(g.path){if(!c.test(g.path))throw TypeError("option path is invalid");j+="; Path="+g.path}if(g.expires){var l,m=g.expires;if(l=m,"[object Date]"!==b.call(l)&&!(l instanceof Date)||isNaN(m.valueOf()))throw TypeError("option expires is invalid");j+="; Expires="+m.toUTCString()}if(g.httpOnly&&(j+="; HttpOnly"),g.secure&&(j+="; Secure"),g.priority)switch("string"==typeof g.priority?g.priority.toLowerCase():g.priority){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(g.sameSite)switch("string"==typeof g.sameSite?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return j};var b=Object.prototype.toString,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function d(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}function e(a){return encodeURIComponent(a)}}}),o=m(n()),p=m(n());function q(a){if(!a)return null;try{let b,c=JSON.parse(a);if(!c)return null;if("Object"===c.constructor.name)return c;if("Array"!==c.constructor.name)throw Error(`Unexpected format: ${c.constructor.name}`);let[f,g,h]=c[0].split("."),i=d.Buffer.from(((b=g)instanceof Uint8Array&&(b=e.decode(b)),b),"base64"),j=new TextDecoder,{exp:k,sub:l,...m}=JSON.parse(j.decode(i));return{expires_at:k,expires_in:k-Math.round(Date.now()/1e3),token_type:"bearer",access_token:c[0],refresh_token:c[1],provider_token:c[2],provider_refresh_token:c[3],user:{id:l,factors:c[4],...m}}}catch(a){return console.warn("Failed to parse cookie string:",a),null}}function r(a){var b;return JSON.stringify([a.access_token,a.refresh_token,a.provider_token,a.provider_refresh_token,(null==(b=a.user)?void 0:b.factors)??null])}function s(){return"undefined"!=typeof window&&void 0!==window.document}var t={path:"/",sameSite:"lax",maxAge:31536e6},u=RegExp(".{1,3180}","g"),v=class{constructor(a){this.cookieOptions={...t,...a,maxAge:t.maxAge}}getItem(a){let b=this.getCookie(a);if(a.endsWith("-code-verifier")&&b)return b;if(b)return JSON.stringify(q(b));let c=function(a,b=()=>null){let c=[];for(let d=0;;d++){let e=b(`${a}.${d}`);if(!e)break;c.push(e)}return c.length?c.join(""):null}(a,a=>this.getCookie(a));return null!==c?JSON.stringify(q(c)):null}setItem(a,b){if(a.endsWith("-code-verifier"))return void this.setCookie(a,b);(function(a,b,c){if(1===Math.ceil(b.length/((void 0)??3180)))return[{name:a,value:b}];let d=[],e=b.match(u);return null==e||e.forEach((b,c)=>{let e=`${a}.${c}`;d.push({name:e,value:b})}),d})(a,r(JSON.parse(b))).forEach(a=>{this.setCookie(a.name,a.value)})}removeItem(a){this._deleteSingleCookie(a),this._deleteChunkedCookies(a)}_deleteSingleCookie(a){this.getCookie(a)&&this.deleteCookie(a)}_deleteChunkedCookies(a,b=0){for(let c=b;;c++){let b=`${a}.${c}`;if(void 0===this.getCookie(b))break;this.deleteCookie(b)}}},w=class extends v{constructor(a){super(a)}getCookie(a){return s()?(0,o.parse)(document.cookie)[a]:null}setCookie(a,b){if(!s())return null;document.cookie=(0,o.serialize)(a,b,{...this.cookieOptions,httpOnly:!1})}deleteCookie(a){if(!s())return null;document.cookie=(0,o.serialize)(a,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function x(a,b,c){var d;let e=s();return(0,f.UU)(a,b,{...c,auth:{flowType:"pkce",autoRefreshToken:e,detectSessionInUrl:e,persistSession:!0,storage:c.auth.storage,...(null==(d=c.auth)?void 0:d.storageKey)?{storageKey:c.auth.storageKey}:{}}})}var y=p.parse,z=p.serialize},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},39727:()=>{},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(31658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},47990:()=>{},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},58014:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(37413),e=c(56389),f=c.n(e),g=c(51189),h=c.n(g);c(82704);let i={title:"Create Next App",description:"Generated by create next app"};function j({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:a})})}},62804:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>_});var d=c(60687),e=c(43210),f=c(5745);function g({tabs:a,activeTab:b,onSelect:c}){return(0,d.jsx)("nav",{className:"tab-nav",children:a.map(a=>(0,d.jsxs)("button",{onClick:()=>c(a.id),className:`tab-button ${b===a.id?"active":""}`,children:[a.icon&&(0,d.jsx)("span",{className:"mr-2",children:a.icon}),a.label]},a.id))})}function h({filters:a,onChange:b,availableFilters:c}){return(0,d.jsxs)("div",{className:"filter-bar",children:[(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{className:"filter-label",children:"Date Range"}),(0,d.jsx)("input",{type:"date",value:a.dateRange.start.toISOString().split("T")[0],onChange:c=>b({dateRange:{...a.dateRange,start:new Date(c.target.value)}}),className:"filter-select"}),(0,d.jsx)("span",{className:"mx-2 text-gray-500",children:"to"}),(0,d.jsx)("input",{type:"date",value:a.dateRange.end.toISOString().split("T")[0],onChange:c=>b({dateRange:{...a.dateRange,end:new Date(c.target.value)}}),className:"filter-select"})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{className:"filter-label",children:"Region"}),(0,d.jsxs)("select",{value:a.region||"",onChange:a=>b({region:a.target.value||void 0}),className:"filter-select",children:[(0,d.jsx)("option",{value:"",children:"All Regions"}),c.regions.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{className:"filter-label",children:"Category"}),(0,d.jsxs)("select",{value:a.category||"",onChange:a=>b({category:a.target.value||void 0}),className:"filter-select",children:[(0,d.jsx)("option",{value:"",children:"All Categories"}),c.categories.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{className:"filter-group",children:[(0,d.jsx)("label",{className:"filter-label",children:"Brand"}),(0,d.jsxs)("select",{value:a.brand||"",onChange:a=>b({brand:a.target.value||void 0}),className:"filter-select",children:[(0,d.jsx)("option",{value:"",children:"All Brands"}),c.brands.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsx)("button",{onClick:()=>b({location:void 0,category:void 0,brand:void 0,region:void 0}),className:"ml-auto text-sm text-blue-600 hover:text-blue-700",children:"Clear Filters"})]})}function i({title:a,value:b,change:c,trend:e,subtitle:f}){return(0,d.jsxs)("div",{className:"kpi-card",children:[(0,d.jsx)("div",{className:"kpi-label",children:a}),(0,d.jsx)("div",{className:"kpi-value",children:b}),f&&(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:f}),void 0!==c&&(0,d.jsxs)("div",{className:`kpi-change ${c>=0?"positive":"negative"}`,children:[c>=0?"+":"",c.toFixed(1),"%","up"===e&&" ↑","down"===e&&" ↓"]})]})}var j=c(48482),k=c(61678),l=c(85168),m=c(27747),n=c(19598),o=c(64635),p=c(83446);function q({data:a,metric:b,color:c="#3b82f6"}){return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(k.b,{data:a,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,d.jsx)(m.W,{dataKey:"date",stroke:"#64748b",fontSize:12,tickFormatter:a=>new Date(a).toLocaleDateString("en",{day:"numeric",month:"short"})}),(0,d.jsx)(n.h,{stroke:"#64748b",fontSize:12,tickFormatter:a=>`₱${(a/1e3).toFixed(0)}k`}),(0,d.jsx)(o.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0"},labelStyle:{color:"#1e293b"},formatter:a=>[`₱${a.toLocaleString()}`,b]}),(0,d.jsx)(p.N,{type:"monotone",dataKey:b,stroke:c,strokeWidth:2,dot:!1})]})})}function r({data:a,metric:b}){let c=Math.max(...a.map(a=>a[b]||0));return(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:a.map(a=>{let e=(a[b]||0)/c,f=`rgba(59, 130, 246, ${e})`;return(0,d.jsxs)("div",{className:"p-3 rounded text-center",style:{backgroundColor:f},children:[(0,d.jsx)("div",{className:"font-semibold text-sm",children:a.name}),(0,d.jsxs)("div",{className:"text-xs mt-1",children:["₱",((a[b]||0)/1e3).toFixed(1),"k"]})]},a.name)})})}function s({data:a,type:b}){return a&&0!==a.length?(0,d.jsx)("div",{className:"space-y-3",children:a.map((b,c)=>{let e=a[0]?.revenue||1,f=b.revenue/e*100;return(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsxs)("span",{className:"font-medium",children:[c+1,". ",b.name]}),(0,d.jsxs)("span",{className:"text-gray-600",children:["₱",(b.revenue/1e3).toFixed(1),"k"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${f}%`}})}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:[b.count," transactions"]})]},b.name||c)})}):(0,d.jsx)("div",{className:"text-gray-500 text-center py-4",children:"No data available"})}function t({data:a,aggregated:b,filters:c,userRole:f}){let g=(0,e.useMemo)(()=>{let c=.85*a.reduce((a,b)=>a+b.peso_value,0),d=c>0?(b.totalRevenue-c)/c*100:0;return{revenue:{value:b.totalRevenue,change:d,label:"Total Revenue"},transactions:{value:b.totalTransactions,change:12.5,label:"Transactions"},avgBasket:{value:b.avgBasketSize,change:-2.3,label:"Avg Basket Size"},topCategory:{value:b.topCategories?.[0]?.name||"N/A",revenue:b.topCategories?.[0]?.revenue||0,label:"Top Category"}}},[a,b,c]),h=(0,e.useMemo)(()=>{switch(f){case"executive":return["revenue","transactions","avgBasket","topCategory"];case"regional_manager":return["revenue","transactions","avgBasket"];case"store_owner":return["transactions","avgBasket"];default:return["revenue","transactions"]}},[f]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"col-span-full grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[h.includes("revenue")&&(0,d.jsx)(i,{title:g.revenue.label,value:`₱${(g.revenue.value/1e3).toFixed(1)}k`,change:g.revenue.change,trend:"up"}),h.includes("transactions")&&(0,d.jsx)(i,{title:g.transactions.label,value:g.transactions.value.toLocaleString(),change:g.transactions.change,trend:"up"}),h.includes("avgBasket")&&(0,d.jsx)(i,{title:g.avgBasket.label,value:`₱${g.avgBasket.value.toFixed(2)}`,change:g.avgBasket.change,trend:"down"}),h.includes("topCategory")&&(0,d.jsx)(i,{title:g.topCategory.label,value:g.topCategory.value,subtitle:`₱${(g.topCategory.revenue/1e3).toFixed(1)}k`})]}),(0,d.jsxs)("div",{className:"card col-span-full md:col-span-2",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Revenue Trend"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(q,{data:b.dailyMetrics,metric:"revenue",color:"#10b981"})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Regional Performance"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(r,{data:b.regionMetrics,metric:"revenue"})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Top Products"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(s,{data:b.topCategories?.slice(0,5),type:"category"})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Top Brands"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(s,{data:b.topBrands?.slice(0,5),type:"brand"})})]}),"executive"===f&&(0,d.jsxs)("div",{className:"card col-span-full",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:"Executive Insights"}),(0,d.jsx)("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:"Ask Aladdin"})]}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-gray-700",children:["Revenue is up ",g.revenue.change.toFixed(1),"% compared to the previous period.",b.topCategories?.[0]?.name," continues to be the top-performing category. Consider focusing marketing efforts on underperforming regions."]})})})]})]})}function u({title:a,views:b,data:c,filters:f,className:g=""}){let h=Object.keys(b),[i,j]=(0,e.useState)(h[0]),k=b[i],l=(0,e.useMemo)(()=>({volume:"Transaction Volume",revenue:"Revenue Trend",basket:"Basket Size",duration:"Shopping Duration",mix:"Category Mix",pareto:"Pareto Analysis",subs:"Substitutions",basketHeat:"Basket Heatmap",funnel:"Purchase Funnel",methods:"Request Methods",acceptance:"Acceptance Rate",traits:"Behavior Traits",demographics:"Demographics",ageGender:"Age & Gender",location:"Location",segment:"Segments",...Object.fromEntries(h.map(a=>[a,a]))}),[h]);return(0,d.jsxs)("div",{className:`card ${g}`,children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:a}),h.length>1&&(0,d.jsx)("select",{value:i,onChange:a=>j(a.target.value),className:"text-sm px-2 py-1 border rounded",children:h.map(a=>(0,d.jsx)("option",{value:a,children:l[a]},a))})]}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)("div",{className:"chart-container",children:(0,d.jsx)(k,{data:c,filters:f})})})]})}var v=c(2041),w=c(3944);function x({data:a}){let b=(0,e.useMemo)(()=>a?.dailyMetrics?a.dailyMetrics.slice(-7).map(a=>({date:new Date(a.date).toLocaleDateString("en",{weekday:"short"}),volume:a.count})):[],[a]);return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:b,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,d.jsx)(m.W,{dataKey:"date",stroke:"#64748b",fontSize:12}),(0,d.jsx)(n.h,{stroke:"#64748b",fontSize:12}),(0,d.jsx)(o.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0"},labelStyle:{color:"#1e293b"}}),(0,d.jsx)(w.y,{dataKey:"volume",fill:"#3b82f6",radius:[4,4,0,0]})]})})}function y({data:a}){let b=(0,e.useMemo)(()=>a?.dailyMetrics?a.dailyMetrics.slice(-30).map(a=>({date:new Date(a.date).toLocaleDateString("en",{day:"numeric",month:"short"}),revenue:a.revenue})):[],[a]);return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(k.b,{data:b,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,d.jsx)(m.W,{dataKey:"date",stroke:"#64748b",fontSize:12}),(0,d.jsx)(n.h,{stroke:"#64748b",fontSize:12,tickFormatter:a=>`₱${(a/1e3).toFixed(0)}k`}),(0,d.jsx)(o.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0"},labelStyle:{color:"#1e293b"},formatter:a=>`₱${a.toLocaleString()}`}),(0,d.jsx)(p.N,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,dot:!1})]})})}function z({data:a}){let b=(0,e.useMemo)(()=>a?.dailyMetrics?a.dailyMetrics.slice(-14).map(a=>({date:new Date(a.date).toLocaleDateString("en",{day:"numeric"}),avgBasket:a.revenue/a.count})):[],[a]);return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(k.b,{data:b,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,d.jsx)(m.W,{dataKey:"date",stroke:"#64748b",fontSize:12}),(0,d.jsx)(n.h,{stroke:"#64748b",fontSize:12,tickFormatter:a=>`₱${a.toFixed(0)}`}),(0,d.jsx)(o.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0"},labelStyle:{color:"#1e293b"},formatter:a=>`₱${a.toFixed(2)}`}),(0,d.jsx)(p.N,{type:"monotone",dataKey:"avgBasket",stroke:"#f59e0b",strokeWidth:2,dot:{fill:"#f59e0b",r:3}})]})})}function A({data:a}){return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:[{duration:"0-5 min",count:120},{duration:"5-10 min",count:200},{duration:"10-20 min",count:150},{duration:"20-30 min",count:80},{duration:"30+ min",count:50}],layout:"horizontal",children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),(0,d.jsx)(m.W,{type:"number",stroke:"#64748b",fontSize:12}),(0,d.jsx)(n.h,{type:"category",dataKey:"duration",stroke:"#64748b",fontSize:12}),(0,d.jsx)(o.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0"},labelStyle:{color:"#1e293b"}}),(0,d.jsx)(w.y,{dataKey:"count",fill:"#8b5cf6",radius:[0,4,4,0]})]})})}var B=c(56651),C=c(56988),D=c(25679);let E=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function F({data:a}){let b=a?.slice(0,6)||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(B.r,{children:[(0,d.jsx)(C.F,{data:b,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"revenue",label:({name:a,percent:b})=>`${a} ${(100*(b||0)).toFixed(0)}%`,children:b.map((a,b)=>(0,d.jsx)(D.f,{fill:E[b%E.length]},`cell-${b}`))}),(0,d.jsx)(o.m,{formatter:a=>`₱${a.toLocaleString()}`})]})})}function G({data:a}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Pareto Analysis Chart"})}function H({data:a}){return(0,d.jsx)("div",{className:"overflow-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b",children:[(0,d.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,d.jsx)("th",{className:"text-right py-2",children:"Substitution Rate"})]})}),(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"py-2",children:"Product A → Product B"}),(0,d.jsx)("td",{className:"text-right",children:"23%"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"py-2",children:"Product C → Product D"}),(0,d.jsx)("td",{className:"text-right",children:"18%"})]})]})]})})}function I({data:a}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Basket Time Heatmap"})}function J({data:a}){let b=a?.funnel||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:b,layout:"horizontal",children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3"}),(0,d.jsx)(m.W,{type:"number"}),(0,d.jsx)(n.h,{type:"category",dataKey:"stage"}),(0,d.jsx)(o.m,{}),(0,d.jsx)(w.y,{dataKey:"count",fill:"#3b82f6"})]})})}function K({data:a}){let b=a?.methods||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:b,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3"}),(0,d.jsx)(m.W,{dataKey:"method"}),(0,d.jsx)(n.h,{}),(0,d.jsx)(o.m,{}),(0,d.jsx)(w.y,{dataKey:"count",fill:"#10b981"})]})})}function L({data:a}){let b=a?.acceptance||0;return(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,d.jsxs)("div",{className:"text-4xl font-bold text-green-600",children:[(100*b).toFixed(1),"%"]}),(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Acceptance Rate"}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-4",children:(0,d.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${100*b}%`}})})]})}function M({data:a}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Behavior Radar Chart"})}let N=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];function O({data:a}){let b=a?.age||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(B.r,{children:[(0,d.jsx)(C.F,{data:b,cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",dataKey:"count",label:({range:a})=>a,children:b.map((a,b)=>(0,d.jsx)(D.f,{fill:N[b%N.length]},`cell-${b}`))}),(0,d.jsx)(o.m,{})]})})}function P({data:a}){let b=a?.gender||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:b,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3"}),(0,d.jsx)(m.W,{dataKey:"type"}),(0,d.jsx)(n.h,{}),(0,d.jsx)(o.m,{}),(0,d.jsx)(w.y,{dataKey:"count",fill:"#8b5cf6"})]})})}function Q({data:a}){let b=a?.locations||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(B.r,{children:[(0,d.jsx)(C.F,{data:b,cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",dataKey:"count",nameKey:"name",children:b.map((a,b)=>(0,d.jsx)(D.f,{fill:N[b%N.length]},`cell-${b}`))}),(0,d.jsx)(o.m,{})]})})}function R({data:a}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Segment Analysis Chart"})}function S({data:a,aggregated:b,filters:c}){let f=(0,e.useMemo)(()=>({transactions:b,products:b.topCategories?.slice(0,10),behavior:{funnel:[{stage:"Awareness",count:1e3},{stage:"Interest",count:750},{stage:"Consideration",count:500},{stage:"Purchase",count:250},{stage:"Retention",count:100}],methods:[{method:"Online",count:450},{method:"In-Store",count:350},{method:"Mobile",count:200}],acceptance:.78,traits:[{trait:"Price Conscious",score:.8},{trait:"Brand Loyal",score:.6},{trait:"Impulse Buyer",score:.4},{trait:"Research Driven",score:.7}]},demographics:{age:[{range:"18-24",count:150},{range:"25-34",count:300},{range:"35-44",count:250},{range:"45-54",count:200},{range:"55+",count:100}],gender:[{type:"Male",count:450},{type:"Female",count:520},{type:"Other",count:30}],locations:[{name:"Metro Manila",count:400},{name:"Cebu",count:200},{name:"Davao",count:150},{name:"Others",count:250}],segments:[{name:"Premium",value:25},{name:"Regular",value:50},{name:"Budget",value:25}]}}),[a,b]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u,{title:"Transaction Trends",data:f.transactions,filters:c,views:{volume:x,revenue:y,basket:z,duration:A}}),(0,d.jsx)(u,{title:"Product Mix & SKU",data:f.products,filters:c,views:{mix:F,pareto:G,subs:H,basketHeat:I}}),(0,d.jsx)(u,{title:"Consumer Behavior",data:f.behavior,filters:c,views:{funnel:J,methods:K,acceptance:L,traits:M}}),(0,d.jsx)(u,{title:"Consumer Profiling",data:f.demographics,filters:c,views:{demographics:O,ageGender:P,location:Q,segment:R}})]})}function T({data:a,metric:b}){let c=a["revenue"===b?"daily":"weekly"]||[];return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(k.b,{data:c,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3"}),(0,d.jsx)(m.W,{dataKey:"revenue"===b?"date":"week"}),(0,d.jsx)(n.h,{}),(0,d.jsx)(o.m,{}),(0,d.jsx)(p.N,{type:"monotone",dataKey:b,stroke:"#3b82f6"})]})})}function U({data:a,periods:b=[7,14,30]}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Moving Average Chart"})}function V({data:a}){return(0,d.jsx)(j.u,{width:"100%",height:"100%",children:(0,d.jsxs)(v.E,{data:a,children:[(0,d.jsx)(l.d,{strokeDasharray:"3 3"}),(0,d.jsx)(m.W,{dataKey:"day"}),(0,d.jsx)(n.h,{}),(0,d.jsx)(o.m,{}),(0,d.jsx)(w.y,{dataKey:"avgRevenue",fill:"#10b981"})]})})}function W({data:a}){return(0,d.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Growth Rate Analysis"})}function X({data:a,aggregated:b,filters:c}){let f=(0,e.useMemo)(()=>({daily:b.dailyMetrics||[],weekly:function(a){let b=[];for(let c=0;c<a.length;c+=7){let d=a.slice(c,c+7);d.length>0&&b.push({week:`Week ${Math.floor(c/7)+1}`,revenue:d.reduce((a,b)=>a+b.revenue,0),count:d.reduce((a,b)=>a+b.count,0)})}return b}(b.dailyMetrics||[]),monthly:function(a){let b={};return a.forEach(a=>{let c=new Date(a.date).toLocaleDateString("en",{year:"numeric",month:"short"});b[c]||(b[c]={month:c,revenue:0,count:0}),b[c].revenue+=a.revenue,b[c].count+=a.count}),Object.values(b)}(b.dailyMetrics||[]),seasonal:[{day:"Monday",avgRevenue:45e3,avgTransactions:120},{day:"Tuesday",avgRevenue:48e3,avgTransactions:125},{day:"Wednesday",avgRevenue:52e3,avgTransactions:135},{day:"Thursday",avgRevenue:51e3,avgTransactions:130},{day:"Friday",avgRevenue:65e3,avgTransactions:165},{day:"Saturday",avgRevenue:72e3,avgTransactions:180},{day:"Sunday",avgRevenue:58e3,avgTransactions:145}]}),[a,b]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"card col-span-full md:col-span-2",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Revenue Trends"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(T,{data:f,metric:"revenue"})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Growth Analysis"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(W,{data:f})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Moving Averages"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(U,{data:f.daily,periods:[7,14,30]})})]}),(0,d.jsxs)("div",{className:"card col-span-full",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Seasonality Patterns"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)(V,{data:f.seasonal})})]})]})}var Y=c(70331);function Z({data:a,aggregated:b,filters:c,userRole:f="analyst"}){let[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(!1),[k,l]=(0,e.useState)("aladdin"),m=async a=>{j(!0);try{let d;switch(k){case"aladdin":d=await Y.$.genie.generate(`Generate ${a} insights for the current data`,{metrics:b,filters:c},f);break;case"retailbot":d=await Y.$.retailBot.analyze(`What are the key ${a} insights?`,b);break;case"adsbot":d=await Y.$.adsBot.analyze(b,["performance","trends","optimization"])}h(d)}catch(a){console.error("Error generating insights:",a)}finally{j(!1)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"card col-span-full",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:"AI Assistant Selection"}),(0,d.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"text-sm px-3 py-1 border rounded",children:[(0,d.jsx)("option",{value:"aladdin",children:"\uD83E\uDDDE Aladdin Insights"}),(0,d.jsx)("option",{value:"retailbot",children:"\uD83C\uDFEA RetailBot"}),(0,d.jsx)("option",{value:"adsbot",children:"\uD83D\uDCE2 AdsBot"})]})]}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,d.jsx)("button",{onClick:()=>m("executive-summary"),disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"Executive Summary"}),(0,d.jsx)("button",{onClick:()=>m("anomaly"),disabled:i,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:"Detect Anomalies"}),(0,d.jsx)("button",{onClick:()=>m("trends"),disabled:i,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"Trend Analysis"}),(0,d.jsx)("button",{onClick:()=>m("what-if"),disabled:i,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50",children:"What-If Scenario"})]})})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Ask a Question"})}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("textarea",{className:"w-full p-3 border rounded-lg resize-none",rows:3,placeholder:"Type your question here...",onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||a.preventDefault()}}),(0,d.jsx)("button",{className:"mt-3 w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Get Answer"})]})]}),g&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"card col-span-full md:col-span-2",children:[(0,d.jsxs)("div",{className:"card-header",children:[(0,d.jsx)("h4",{children:"AI Analysis"}),(0,d.jsx)("span",{className:"text-xs text-gray-500",children:new Date(g.generated_at||Date.now()).toLocaleString()})]}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,d.jsx)("p",{className:"whitespace-pre-wrap",children:g.content||g.analysis||g.insights})}),g.metadata&&(0,d.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Model: ",g.metadata.model," | Confidence: ",(g.metadata.confidence||g.confidence||90).toFixed(0),"%"]})]})]}),(g.recommendations||g.optimization_tips)&&(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Recommendations"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)("ul",{className:"space-y-2",children:(g.recommendations||g.optimization_tips||[]).map((a,b)=>(0,d.jsxs)("li",{className:"flex items-start",children:[(0,d.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),(0,d.jsx)("span",{className:"text-sm",children:a})]},b))})})]}),(g.metrics||g.performance_metrics)&&(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Key Metrics"})}),(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(g.metrics||g.performance_metrics||{}).map(([a,b])=>(0,d.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500 uppercase",children:a}),(0,d.jsx)("div",{className:"text-lg font-semibold",children:String(b)})]},a))})})]})]}),i&&(0,d.jsx)("div",{className:"card col-span-full",children:(0,d.jsx)("div",{className:"card-body flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:"Generating insights..."})]})})})]})}let $=[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"databank",label:"Databank",icon:"\uD83D\uDDC4️"},{id:"trends",label:"Trends",icon:"\uD83D\uDCC8"},{id:"ai-insights",label:"AI Insights",icon:"\uD83E\uDDDE"}];function _(){let{user:a}=function(){let[a,b]=(0,e.useState)(null),[c,d]=(0,e.useState)(null),[g,h]=(0,e.useState)(!0);return(0,f.createClientComponentClient)(),{user:c||a,loading:g,isAuthenticated:!!a}}(),[b,c]=(0,e.useState)("overview"),[i,j]=(0,e.useState)({dateRange:{start:new Date(Date.now()-2592e6),end:new Date}}),{data:k,loading:l,error:m}=function(a){let[b,c]=(0,e.useState)([]),[d,g]=(0,e.useState)(!0),[h,i]=(0,e.useState)(null);return(0,f.createClientComponentClient)(),{data:b,loading:d,error:h}}(0),n=(0,e.useMemo)(()=>k?k.filter(a=>{if(i.location&&a.store_id!==i.location||i.category&&a.category!==i.category||i.brand&&a.brand!==i.brand||i.region&&a.region!==i.region)return!1;let b=new Date(a.timestamp);return!(b<i.dateRange.start)&&!(b>i.dateRange.end)}):[],[k,i]),o=(0,e.useMemo)(()=>n.length?{totalRevenue:n.reduce((a,b)=>a+b.peso_value,0),totalTransactions:n.length,avgBasketSize:n.reduce((a,b)=>a+b.peso_value,0)/n.length,topCategories:ab(n,"category"),topBrands:ab(n,"brand"),dailyMetrics:function(a){let b={};return a.forEach(a=>{let c=new Date(a.timestamp).toISOString().split("T")[0];b[c]||(b[c]={count:0,revenue:0}),b[c].count++,b[c].revenue+=a.peso_value}),Object.entries(b).map(([a,b])=>({date:a,...b})).sort((a,b)=>a.date.localeCompare(b.date))}(n),regionMetrics:ab(n,"region")}:null,[n]),p=(0,e.useCallback)(a=>{j(b=>({...b,...a}))},[]);return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,d.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Scout Databank"}),(0,d.jsxs)("span",{className:"ml-3 text-sm text-gray-500",children:["Welcome, ",a?.full_name||"User"," (",a?.role,")"]})]}),(0,d.jsx)("div",{className:"flex items-center space-x-4",children:(0,d.jsx)("button",{className:"text-gray-500 hover:text-gray-700",children:(0,d.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]})})}),(0,d.jsx)(h,{filters:i,onChange:p,availableFilters:{locations:aa(k||[],"store_id"),categories:aa(k||[],"category"),brands:aa(k||[],"brand"),regions:aa(k||[],"region")}}),(0,d.jsx)(g,{tabs:$,activeTab:b,onSelect:a=>c(a)}),(0,d.jsxs)("main",{className:"grid-container",children:[l&&(0,d.jsx)("div",{className:"col-span-full flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading dashboard data..."})]})}),m&&(0,d.jsx)("div",{className:"col-span-full",children:(0,d.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:["Error loading data: ",m.message]})}),!l&&!m&&o&&(0,d.jsxs)(d.Fragment,{children:["overview"===b&&(0,d.jsx)(t,{data:n,aggregated:o,filters:i,userRole:a?.role}),"databank"===b&&(0,d.jsx)(S,{data:n,aggregated:o,filters:i}),"trends"===b&&(0,d.jsx)(X,{data:n,aggregated:o,filters:i}),"ai-insights"===b&&(0,d.jsx)(Z,{data:n,aggregated:o,filters:i,userRole:a?.role})]})]})]})}function aa(a,b){return Array.from(new Set(a.map(a=>String(a[b]))).values()).filter(Boolean)}function ab(a,b){let c={};return a.forEach(a=>{let d=a[b]||"Unknown";c[d]||(c[d]={count:0,revenue:0}),c[d].count++,c[d].revenue+=a.peso_value}),Object.entries(c).map(([a,b])=>({name:a,...b})).sort((a,b)=>b.revenue-a.revenue)}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70331:(a,b,c)=>{"use strict";c.d(b,{$:()=>e,f:()=>f});var d=c(43210);let e={genie:{generate:async(a,b,c="analyst")=>{let d=await fetch("https://cxzllzyxwpyptfretryc.supabase.co/functions/v1/aladdin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a,context:b,user_role:c})});if(!d.ok)throw Error(`AI Genie error: ${d.statusText}`);return d.json()}},retailBot:{analyze:async(a,b,c="performance")=>{let d=await fetch("https://cxzllzyxwpyptfretryc.supabase.co/functions/v1/retailbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,store_data:b,analysis_type:c})});if(!d.ok)throw Error(`RetailBot error: ${d.statusText}`);return d.json()},forecast:async a=>{let b=await fetch("https://cxzllzyxwpyptfretryc.supabase.co/functions/v1/retailbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"Generate sales forecast",store_data:a,analysis_type:"forecast"})});if(!b.ok)throw Error(`RetailBot forecast error: ${b.statusText}`);return b.json()}},adsBot:{analyze:async(a,b=["ctr","conversion","roi"])=>{let c=await fetch("https://cxzllzyxwpyptfretryc.supabase.co/functions/v1/adsbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaign_data:a,metrics_focus:b})});if(!c.ok)throw Error(`AdsBot error: ${c.statusText}`);return c.json()},optimizeCreative:async a=>{let b=await fetch("https://cxzllzyxwpyptfretryc.supabase.co/functions/v1/adsbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaign_data:a,analysis_type:"creative",metrics_focus:["engagement","conversion"]})});if(!b.ok)throw Error(`AdsBot creative optimization error: ${b.statusText}`);return b.json()}}};function f(){let[a,b]=(0,d.useState)(!1),[c,f]=(0,d.useState)(null),g=(0,d.useCallback)(async(a,c,d)=>{b(!0),f(null);try{return await e.genie.generate(a,c,d)}catch(a){throw f(a instanceof Error?a.message:"Unknown error"),a}finally{b(!1)}},[]);return{loading:a,error:c,askGenie:g,analyzeRetail:(0,d.useCallback)(async(a,c)=>{b(!0),f(null);try{return await e.retailBot.analyze(a,c)}catch(a){throw f(a instanceof Error?a.message:"Unknown error"),a}finally{b(!1)}},[]),analyzeAds:(0,d.useCallback)(async(a,c)=>{b(!0),f(null);try{return await e.adsBot.analyze(a,c)}catch(a){throw f(a instanceof Error?a.message:"Unknown error"),a}finally{b(!1)}},[])}}},74075:a=>{"use strict";a.exports=require("zlib")},79424:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["dashboard",{children:["optimized",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,12604)),"/Users/tbwa/tbwa-agency-databank/platforms/scout-dash/app/dashboard/optimized/page.tsx"]}]},{}]},{metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,58014)),"/Users/tbwa/tbwa-agency-databank/platforms/scout-dash/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,46055))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,H=["/Users/tbwa/tbwa-agency-databank/platforms/scout-dash/app/dashboard/optimized/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/dashboard/optimized/page",pathname:"/dashboard/optimized",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/dashboard/optimized/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},82420:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},82704:()=>{},84628:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},85649:(a,b,c)=>{Promise.resolve().then(c.bind(c,62804))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},95377:(a,b,c)=>{Promise.resolve().then(c.bind(c,12604))},97819:()=>{}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,40,738],()=>b(b.s=79424));module.exports=c})();